# KeepClick - 智能自动点击助手

一个功能强大的 Android 自动点击应用，支持多位置轮流点击、随机间隔和位置偏移，适用于游戏连招、自动化测试等场景。

## ✨ 核心功能

### 🎯 多位置点击
- **支持最多 10 个点击位置**
- **轮流点击**：按选取顺序依次点击各个位置
- **位置标记**：每个位置显示序号（①②③...）
- **灵活取消**：点击已选位置圆圈即可取消

### ⚙️ 智能设置
- **随机点击间隔**：设置最小值和最大值，每次点击使用随机间隔（防检测）
- **随机位置偏移**：点击位置在指定半径内随机偏移（更拟人化）

### 🎨 浮动工具栏
- **固定位置**：左上角工具栏，支持拖拽移动
- **穿透模式**：非选取状态下可操作底层应用
- **5 个功能按钮**：
  - **选取**：进入/退出位置选择模式
  - **开始**：开始自动点击
  - **暂停**：暂停点击
  - **清空**：清除所有选中位置
  - **移动**：拖拽移动工具栏

## 📱 使用指南

### 首次设置

1. **授予权限**
   - 打开应用，点击"启动浮窗"
   - 授予**悬浮窗权限**
   - 在系统设置中启用**KeepClick 无障碍服务**

2. **配置参数**（可选）
   - 设置点击间隔（默认 150-300ms）
   - 设置随机偏移半径（默认 10px）
   - 点击"保存设置"

### 基本操作

#### 1️⃣ 选取点击位置
```
点击"选取"按钮 → 点击屏幕上要连击的位置 → 可选取多个位置（最多10个）
```
- 每个位置会显示灰色半透明圆圈和序号
- 再次点击圆圈可取消该位置

#### 2️⃣ 开始自动点击
```
点击"开始"按钮 → 按顺序轮流点击所有位置 → 自动循环
```
- 点击顺序：① → ② → ③ → ... → ① （循环）
- 每次点击后等待随机间隔（如 150-300ms 之间的随机值）
- 点击位置会随机偏移（在设定半径内）

#### 3️⃣ 暂停和清空
```
点击"暂停"按钮 → 停止点击
点击"清空"按钮 → 清除所有位置
```

#### 4️⃣ 移动工具栏
```
点击"移动"按钮并拖拽 → 移动工具栏到其他位置
```

### 使用场景示例

#### 场景 1：游戏技能连招
```
选取位置：
  ① 技能1按钮
  ② 技能2按钮  
  ③ 普攻按钮

点击"开始" → 自动循环释放技能连招
```

#### 场景 2：应用批量操作
```
选取位置：
  ① 点赞按钮
  ② 收藏按钮
  ③ 分享按钮

点击"开始" → 自动执行所有操作
```

#### 场景 3：自动刷新
```
选取位置：
  ① 刷新按钮

设置间隔：5000-6000ms
点击"开始" → 每 5-6 秒自动刷新一次
```

## 🛠️ 技术架构

### 核心组件

| 组件 | 功能 | 说明 |
|------|------|------|
| `MainActivity` | 主界面 | 权限管理、参数设置 |
| `FloatingWindowService` | 浮窗服务 | 管理浮动工具栏的生命周期 |
| `FloatingBallView` | 自定义视图 | 工具栏 UI 和交互逻辑 |
| `AutoClickService` | 无障碍服务 | 执行自动点击操作 |

### 权限要求

- ✅ `SYSTEM_ALERT_WINDOW` - 悬浮窗权限
- ✅ `BIND_ACCESSIBILITY_SERVICE` - 无障碍服务权限  
- ✅ `FOREGROUND_SERVICE` - 前台服务权限
- ✅ `FOREGROUND_SERVICE_SPECIAL_USE` - 特殊用途前台服务

### 技术特点

- **穿透窗口技术**：非选取模式下自动穿透，不影响底层应用操作
- **无障碍手势模拟**：使用 `GestureDescription` 实现真实点击
- **窗口稳定性保障**：等待窗口布局完成后再执行首次点击
- **随机算法**：
  - 间隔：`[最小值, 最大值]` 范围内的随机数
  - 偏移：圆形区域内的随机坐标

## 🔧 高级配置

### 点击间隔设置

```
最小值：150ms（推荐 >= 100ms，避免过快）
最大值：300ms（推荐 <= 1000ms）

示例：
- 游戏连招：150-300ms
- 普通自动化：500-1000ms
- 定时任务：5000-10000ms
```

### 随机偏移设置

```
半径：0-100px

示例：
- 精确点击：0-5px
- 一般场景：5-15px（推荐，默认 10px）
- 大按钮：20-50px
```

## ⚠️ 注意事项

### 使用限制

1. **银行类应用**：部分银行 APP 会阻止悬浮窗显示（安全保护机制）
> 若必须使用，可关闭银行类应用的“支付安全检测”权限，或使用小窗打开银行类应用
2. **系统权限**：需要在系统设置中手动启用无障碍服务
3. **兼容性**：需要 Android 7.0 (API 24) 及以上版本


## 📦 构建说明

### 环境要求

- Android Studio Arctic Fox 及以上
- Android SDK 34
- Gradle 8.7+

## 📚 相关文档

- [多位置轮流点击功能说明](MULTI_POSITION_FEATURE.md)
- [随机偏移功能说明](RANDOM_OFFSET_FEATURE.md)
- [点击失败问题排查](CLICK_NOT_WORKING_FIX.md)

## 🔄 版本历史

### v1.0.0 (当前版本)
- ✅ 支持多位置选取（最多 10 个）
- ✅ 轮流点击功能
- ✅ 随机点击间隔
- ✅ 随机位置偏移
- ✅ 浮动工具栏
